import sys
import os
# Get the current directory of the script
current_dir = os.path.dirname(os.path.abspath(__file__))
parent_dir = os.path.dirname(current_dir)
hydro_dir = os.path.join(parent_dir, 'hydro')
swan_dir = os.path.join(parent_dir, 'swan')
sys.path.append(hydro_dir)
sys.path.append(swan_dir)

import sheep
import alpaca
import numpy as np

xgrid = 3000                                # size of grid in x-direction
ygrid = 5000                                # size of grid in y-direction
mxc = 300                                   # number of grid points in x (-1)
myc = 300                                   # number of grid points in y (-1)

# six-body reg: 
# x = [1290,1390,1490,1590,1690,1790] # x-position of bodies
# ya=4500         # y-position of row 1
# yb=4500         # y-position of row 2
# three-body stag: x = [1490,1590,1690]ya=4500 yb=4450 # change i==1 in run_swan
# three-body reg: x=[1490,1590,1690] ya=4500 yb=4400
# six body stag: 
x=[1490, 1590, 1690, 1420, 1520, 1620]
ya=4500 
yb=4400
                                  
H = 0.8                                     # avg significant wave height [m] (i had 1.3832  for some reason?)
T = 5                                       # avg wave period [s] from buoy 44097
w = np.array([2*np.pi/T])   # wave frequency

breakwtr=False
point_absorber=False
oscillating_surge=False
attenuator=False
farm=False
controls=False

# Kt_H, Kr_H, w_vals = sheep.wec_run(w,breakwtr,point_absorber,oscillating_surge,attenuator,farm,controls)
# if farm == True:
#     i = 1
# else:
#     i = 0

KR = [0.370862285231812, 0.370862285231812, 0.370862285231812, 0.370862285231812, 0.370862285231812, 0.370862285231812]
KT = [0.4720603484301374, 0.4720603484301374, 0.4720603484301374, 0.4720603484301374, 0.4720603484301374, 0.4720603484301374]

#KR = [Kr_H[0][0], Kr_H[i][0], Kr_H[2*i][0], Kr_H[0][0], Kr_H[i][0], Kr_H[2*i][0]]
#KT = [Kt_H[0][0], Kt_H[i][0], Kt_H[2*i][0], Kt_H[0][0], Kt_H[i][0], Kt_H[2*i][0]]
print(KR)
print(KT)

waveHeight = alpaca.swanrun(KR, KT, x, ya, yb, H, T, xgrid, ygrid, mxc, myc,attenuator)

#PA_2a --> done
#[0.03807273109852116, 0.06499208314311633, 0.040096998019411245, 0.03807273109852116, 0.06499208314311633, 0.040096998019411245]
#[0.8401081384609506, 0.911987619729587, 0.8456639211808719, 0.8401081384609506, 0.911987619729587, 0.8456639211808719]

#PA1 --> 1c done, 1b done, 1d done
#[0.03779085361494361, 0.03779085361494361, 0.03779085361494361, 0.03779085361494361, 0.03779085361494361, 0.03779085361494361]
#[0.8280030081268028, 0.8280030081268028, 0.8280030081268028, 0.8280030081268028, 0.8280030081268028, 0.8280030081268028]

#PA_3 --> 3b done
#[0.02227974301577751, 0.09392800947096802, 0.02005585929080711, 0.02227974301577751, 0.09392800947096802, 0.02005585929080711]
#[0.9250101238932188, 1.1928699997734387, 0.9531449869964649, 0.9250101238932188, 1.1928699997734387, 0.9531449869964649]

######################################
#OS_2a --> done
#[0.3709411354218053, 0.3665911897905194, 0.36876631215051114, 0.3709411354218053, 0.3665911897905194, 0.36876631215051114]
#[0.6366729831072453, 0.7655860353285128, 0.6425796509651608, 0.6366729831072453, 0.7655860353285128, 0.6425796509651608]

#OS_1 --> 1c done, 1b done, 1d up next
#[0.370862285231812, 0.370862285231812, 0.370862285231812, 0.370862285231812, 0.370862285231812, 0.370862285231812]
#[0.4720603484301374, 0.4720603484301374, 0.4720603484301374, 0.4720603484301374, 0.4720603484301374, 0.4720603484301374]

#OS_3 --> 3b done
#[0.2783692831975655, 0.37079990451279765, 0.2608995207224629, 0.2783692831975655, 0.37079990451279765, 0.2608995207224629]
#[0.7641236913239117, 0.5707201155728615, 0.7893677994192907, 0.7641236913239117, 0.5707201155728615, 0.7893677994192907]##########################################

#################
#atten_1 --> 1b done, 1d done
#[-0.0005051808187180873, -0.0005051808187180873, -0.0005051808187180873, -0.0005051808187180873, -0.0005051808187180873, -0.0005051808187180873]
#[0.6190297603390936, 0.6190297603390936, 0.6190297603390936, 0.6190297603390936, 0.6190297603390936, 0.6190297603390936]

#atten_3 --> 3b done
#[-0.004852728238972759, -0.00456027331218134, -0.004090734401795082, -0.004852728238972759, -0.00456027331218134, -0.004090734401795082]
#[0.6657210143998338, 1.2069882631702886, 0.6718470161044465, 0.6657210143998338, 1.2069882631702886, 0.6718470161044465]

#############################################
#break 1 --> 1c done, 1b done, 1d running
#[0.08663442215760586, 0.08663442215760586, 0.08663442215760586, 0.08663442215760586, 0.08663442215760586, 0.08663442215760586]
#[0.7845327869442902, 0.7845327869442902, 0.7845327869442902, 0.7845327869442902, 0.7845327869442902, 0.7845327869442902]

# break_3 --> 3b done
#[0.019493040362605907, 0.0634531641900784, 0.017306190573942004, 0.019493040362605907, 0.0634531641900784, 0.017306190573942004]
#[0.8236965767746466, 0.9376603294471088, 0.8285389693995284, 0.8236965767746466, 0.9376603294471088, 0.8285389693995284]



